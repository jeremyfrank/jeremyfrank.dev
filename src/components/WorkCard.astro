---
import { renderImg } from "astro-imagetools/api";
import cx from 'classnames'

const { title, url, image, color, summary, extended = false } = Astro.props
const renderedImgHTML = await renderImg({
  src: image,
  alt: `Screenshot of ${title} work`,
  breakpoints: [750, 900, 1200],
  sizes: '(min-width: 1024px) 682px, (min-width: 640px) 33.33vw, 100vw',
  attributes: {
    img: {
      class: 'col-span-2',
    }
  }
});
---

<li
  class={cx(
    'flex flex-col relative',
    'rounded-md overflow-hidden shadow-lg hover:shadow-xl',
    'transform-gpu duration-200 hover:scale-[1.03]',
  )}
>
  <Fragment set:html={renderedImgHTML.img}/>
  <div
    class={cx(
      'flex flex-col flex-grow items-start',
      'border-t-4 bg-zinc-50 dark:text-zinc-800',
      {
        'gap-4 p-6': extended,
        'gap-1 p-4': !extended,
      }
    )}
    style={`border-color:${color ? color : 'lightblue'}`}
  >
    <h3
      class={
        cx({
          'text-xl sm:text-2xl': extended,
        })
      }
    >
      {title}
    </h3>
    {extended && <p>{summary}</p>}
    {url && <a href={url} class="after:absolute after:inset-0">View Work â†’</a>}
  </div>
</li>
